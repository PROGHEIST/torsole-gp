<div class="container mx-auto px-4 py-10">
  <!-- Header -->
  <h1 class="text-3xl md:text-4xl font-bold text-center mb-10 text-emerald-700">
    üì∏ ‡§õ‡§æ‡§Ø‡§æ‡§ö‡§ø‡§§‡•ç‡§∞‡•á
  </h1>

  <!-- Search and Filter -->
  <div class="flex flex-col md:flex-row gap-4 mb-8 justify-center items-center">
    <input
      type="text"
      [(ngModel)]="searchTerm"
      placeholder="‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï‡§æ‡§®‡•á ‡§∂‡•ã‡§ß‡§æ..."
      class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 w-full md:w-1/3"
    />
    <select
      [(ngModel)]="selectedCategory"
      class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 w-full md:w-1/4"
    >
      <option value="">‡§∏‡§∞‡•ç‡§µ ‡§∂‡•ç‡§∞‡•á‡§£‡•ç‡§Ø‡§æ</option>
      <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
    </select>
  </div>

  <!-- Photo Grid -->
  <div
    class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"
  >
    <div
      *ngFor="let ph of filteredPhotos"
      class="relative group overflow-hidden rounded-2xl shadow-md hover:shadow-xl transition-all duration-300 border border-gray-100 bg-white"
    >
      <!-- Image -->
      <img
        [src]="ph.image"
        [alt]="ph.title"
        class="w-full h-60 object-cover group-hover:scale-105 transition-transform duration-500 cursor-pointer"
        (click)="openFullscreen(ph)"
      />

      <!-- Overlay on Hover -->
      <div
        class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end text-white p-4"
      >
        <div class="flex justify-between items-center mb-2">
          <button
            (click)="openFullscreen(ph)"
            class="bg-white/20 hover:bg-white/30 rounded-full p-2 transition-colors"
            title="Fullscreen"
          >
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path d="M3 4a1 1 0 011-1h4a1 1 0 010 2H6.414l2.293 2.293a1 1 0 11-1.414 1.414L5 6.414V8a1 1 0 01-2 0V4zM9 16a1 1 0 01-1-1v-4a1 1 0 112 0v1.586l2.293-2.293a1 1 0 111.414 1.414L10.414 15H12a1 1 0 110 2H9z"/>
            </svg>
          </button>
          <button
            (click)="downloadPhoto(ph)"
            class="bg-white/20 hover:bg-white/30 rounded-full p-2 transition-colors"
            title="Download"
          >
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.409l-7-14z"/>
            </svg>
          </button>
        </div>
        <h2 class="text-lg font-semibold mb-1 truncate">{{ ph.title }}</h2>
        <p class="text-sm text-gray-200 line-clamp-2">{{ ph.description }}</p>
      </div>

      <!-- Footer -->
      <div
        class="flex items-center justify-between px-4 py-3 bg-gray-50 border-t border-gray-100"
      >
        <span
          class="text-xs font-medium text-emerald-700 bg-emerald-100 px-2 py-1 rounded-md"
        >
          {{ ph.category }}
        </span>
        <span class="text-xs text-gray-500">
          üìÖ {{ ph.upload_date | date: 'dd MMM yyyy' }}
        </span>
      </div>
    </div>
  </div>

  <!-- No Photos Message -->
  <div *ngIf="filteredPhotos.length === 0" class="text-center mt-10 text-gray-500">
    ‡§ï‡•ã‡§£‡§§‡•Ä‡§π‡•Ä ‡§õ‡§æ‡§Ø‡§æ‡§ö‡§ø‡§§‡•ç‡§∞‡•á ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§æ‡§π‡•Ä‡§§.
  </div>
</div>

<!-- Fullscreen Modal -->
<div
  *ngIf="selectedPhoto"
  class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50"
  (click)="closeFullscreen()"
>
  <div class="relative max-w-4xl max-h-full p-4">
    <img
      [src]="selectedPhoto.image"
      [alt]="selectedPhoto.title"
      class="max-w-full max-h-full object-contain"
      (click)="$event.stopPropagation()"
    />
    <div class="absolute top-4 right-4 flex space-x-2">
      <button
        (click)="downloadPhoto(selectedPhoto)"
        class="bg-white/20 hover:bg-white/30 text-white rounded-full p-3 transition-colors"
        title="Download"
      >
        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
          <path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.409l-7-14z"/>
        </svg>
      </button>
      <button
        (click)="closeFullscreen()"
        class="bg-white/20 hover:bg-white/30 text-white rounded-full p-3 transition-colors"
        title="Close"
      >
        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
        </svg>
      </button>
    </div>
  </div>
</div>
